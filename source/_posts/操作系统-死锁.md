---
title: '操作系统-死锁'
date: 2019-03-21 13:52:09
tags:
	- 操作系统
categories: 
	- 操作系统
	- 操作系统概念
---

★★★ 死锁必要条件、解决死锁策略，能写出和分析死锁的代码，能说明在数据库管理系统或者 Java 中如何解决死锁。

所谓死锁是指多个进程因竞争资源而造成的一种僵局（互相等待），若无外力作用，这些进程都**

**将无法向前推进。**现实生活中简单的例子：交通阻塞，两股相向而行的车流都想通过已被对方占用的道路，结果双方都不能前进。

## **1.死锁产生的原因**

1）系统资源的竞争

2）进程推进顺序非法

## **2.死锁产生的必要条件**

产生死锁必须同时满足以下四个条件，只要其中任一条件不成立，死锁就不会发生。

**互斥条件**：进程要求对所分配的资源进行排他性控制，即在一段时间内某资源仅为一个进程所占有。此时若有其他进程请求该资源，则请求进程只能等待。

**不剥夺条件**：进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走，即只能由获得该资源的进程自己来释放。

**请求和保持条件**：又称为部分分配条件。进程每次申请它所需要的一部分资源，在等待新资源的同时，进程继续占有已分配到的资源。

**循环等待条件**：存在一种进程资源的循环等待链，链中每个进程已获得的资源同时被链中下一个进程所请求。即存在一个处于等待状态的进程集合{P1，P2，P3，…，Pa}，其中P，等待的资源被P1（i-0，1，…，n-1）占有，Pn等待资源被P0占有。



例1：产生死锁的必要条件有（）。（2013·腾讯、2012·百度简答题）

A.互斥条件         B.请求和保持条件             C.不可剥夺条件               D.循环等待条件

解答：ABCD。

例2：若系统中有6个队列，有多个进程均需要使用其中的3个，规定每个进程一次只允许申请一个队列，那么最多允许（）进程参与竞争，才不会造成死锁？（2012·淘宝）

A.1个                       B.2个                          C.3个                         D.4个                                                                               解答：B。设想如果有3个进程参与竞争，刚好每个进程都持有2个队列，这样系统中所有队列就全部被使用，3个进程都缺少一个队列完成任务，因而都无法继续进行下去，发生了死锁。



## **3.死锁处理策略**

1）预防死锁：**设置某些限制条件，破坏产生死锁的四个必要条件中的一个或几个。**

2）避免死锁：在**资源的动态分配过程中，用某种方法防止系统进入不安全状态**。**银行家算法**是著名的死锁避免算法。

3）死锁的检测及解除：无须采取任何限制性措施，允许进程在运行过程中发生死锁，**通过系统的检测机制及时地检测出死锁的发生，然后采取某种措施解除死锁。**死锁的检测可利用资源分配图来描述。**死锁的解除主要方法如下：**

**（1）资源剥夺法。**

**（2）撤销进程法。**

**（3）进程回退法**。

例1：避免死锁的一个著名的算法是（）。（2012·腾讯）

A.先入先出法                 B.银行家算法               C.优先级算法               D.资源按序分配法

解答：B。

[死锁代码分析](https://www.cnblogs.com/webwangbao/p/9282455.html)